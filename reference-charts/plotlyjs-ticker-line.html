<!DOCTYPE html>
<html>
	<head>
		<title>Plotly.js Stock Ticker (Random Data)</title>
		<script
			src="https://cdn.plot.ly/plotly-3.1.0.min.js"
			charset="utf-8"
		></script>
		<style>
			@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&family=IBM+Plex+Sans:wght@400,600&display=swap");

			body {
				font-family: Arial, sans-serif;
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				min-height: 100vh;
				margin: 0;
				background-color: #f4f4f9;
			}
			.chart-container {
				width: 80%;
				max-width: 900px;
				padding: 20px;
				background: #ffffff;
				border-radius: 8px;
				box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
			}
			h1 {
				text-align: center;
				margin-bottom: 20px;
			}
		</style>
	</head>
	<body>
		<div class="chart-container">
			<div id="stockChart"></div>
		</div>

		<script>
			// Function to generate mock weekly data with increased volatility
			function generateWeeklyData(
				startDate,
				years,
				startValue,
				growthRate
			) {
				const data = { x: [], y: [] }
				let currentValue = startValue
				let currentDate = new Date(startDate)
				const totalWeeks = years * 52

				for (let i = 0; i < totalWeeks; i++) {
					data.x.push(currentDate.toISOString().slice(0, 10))
					data.y.push(currentValue.toFixed(2))

					// Simulate general growth with increased random fluctuation
					currentValue *=
						1 + growthRate + (Math.random() - 0.5) * 0.15

					// Move to the next week
					currentDate.setDate(currentDate.getDate() + 7)
				}
				return data
			}

			// Generate data for both Amazon and Google
			const amazonData = generateWeeklyData("2015-01-01", 10, 350, 0.005)
			const googleData = generateWeeklyData("2015-01-01", 10, 250, 0.006)

			console.log(amazonData)
			console.log(googleData)

			// Define the traces (one for each line on the chart)
			const traces = [
				{
					x: amazonData.x,
					y: amazonData.y,
					mode: "lines",
					type: "scatter",
					name: "Amazon (AMZN)",
					line: {
						color: "#00A89F", // green
					},
				},
				{
					x: googleData.x,
					y: googleData.y,
					mode: "lines",
					type: "scatter",
					name: "Google (GOOGL)",
					line: {
						color: "#D6C5AA", // beige
					},
				},
			]

			// Define the layout of the chart
			const layout = {
				title: {
					text: "Demo Chart with Plotly.js",
					font: {
						family: '"IBM Plex Sans", sans-serif',
						weight: 600,
						color: "#444",
					},
				},
				subtitle: {
					text: "Stock ticker example",
				},
				margin: {},
				xaxis: {
					title: {
						text: "Year",
						standoff: 20,
					},
					rangeslider: {
						visible: false,
					},
					showline: true,
					mirror: "ticks",
					color: "#777",
					linecolor: "#CCC",
					ticklen: 5,
					tickcolor: "transparent",
					tickfont: {
						family: '"IBM Plex Sans", sans-serif',
						weight: 400,
					},
					type: 'date',
					hoverformat: "%d %b, %Y",
				},
				yaxis: {
					title: {
						text: "Price $",
						standoff: 20,
					},
					rangemode: "tozero",
					showline: true,
					mirror: "ticks",
					color: "#777",
					linecolor: "#CCC",
					ticklen: 5,
					tickcolor: "transparent",
					tickfont: {
						family: '"IBM Plex Sans", sans-serif',
						weight: 400,
					},
				},
				legend: {
					// bgcolor: "red",
					// entrywidth: 250,
					// grouptitlefont: {
					// 	color: "red",
					// },
					// indentation: 10,
					orientation: "h",
					xanchor: "center",
					x: 0.5,
					y: 1.15,
					font: {
						family: '"IBM Plex Sans", sans-serif',
						weight: 400,
						color: "#777",
					},
				},
				hovermode: "x unified", // Show hover information for all traces at a single x-coordinate
				hoverlabel: {
					bordercolor: "#CCC",
					font: {
						color: "#777",
					},
				},
				modebar: {
					// bgcolor: "red",
				},
			}

			// Render the chart in the div with the id "stockChart"
			Plotly.newPlot("stockChart", traces, layout)
		</script>
	</body>
</html>
